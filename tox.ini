## testing-running tool

# to use a local index, run as:
# tox -i http://localhost:3141/root/pypi

[tox]
envlist = py{37,38,39,310}-tw{192,222,current,trunk}

[testenv]
passenv = *
basepython =
    py37: python3.7
    py38: python3.8
    py39: python3.9
    py310: python3.10
deps =
    Parsley>=1.2
    zope.interface>=3.6.1
    setuptools>=0.8.0
    pypy: mock
    tw192: Twisted==19.2.1
    tw222: Twisted==22.2.0
    twcurrent: Twisted
    twtrunk: git+https://github.com/twisted/twisted.git
    coverage
    coveralls
commands =
    coverage run --source=txi2p --omit=*/_version.py,*test* {envdir}/bin/trial txi2p
    python {toxinidir}/run_coveralls.py
